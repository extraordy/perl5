<html><!-- Copyright (c) 1998-2014 O'Reilly Media, Inc.
			This work is licensed under a Creative Commons Attribution-ShareAlike 3.0 Unported License.
			See http://creativecommons.org/licenses/by-sa/3.0/legalcode for more information.
            --><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><link rel="stylesheet" type="text/css" href="../common/Lab.css"><script type="text/javascript" src="../common/Lab.js"></script><script language="javascript"></script><title>Getting Started</title></head><body id="body"><a name="top"></a><div class="title">Getting Started</div><div class="resize"><a href="Perl2-01.html#top" onclick="changeSize('smaller');" class="aS" title="Keep clicking to make fonts smaller">A</a><a href="Perl2-01.html#top" onclick="changeSize('larger');" class="aL" title="Keep clikcing to make fonts larger">A</a><a href="Perl2-01.html#top" onclick="lv()" class="lv" title="Adjust Page for High Contrast">HC</a><div id="fh"><p>Click on <span class="aS">A</span> to make all fonts on the page smaller.</p><p>Click on <span class="aL">A</span> to make all fonts on the page larger.</p><p>Click on <span class="lv">HC</span> to toggle high contrast mode. When you move your mouse over 
                 some bold words in high contrast mode, related words are automatically highlighted. Text is shown
                 in black and white. 
             </p></div></div><hr>
  
  <p>Welcome to the O'Reilly School of Technology's Perl 2—Intermediate Perl course!</p>
 
  
  <div class="outcomesTitle">Course Objectives</div><div class="outcomes">
    <p> When you complete this course, you will be able to:</p>

    <ul><li>create practical programs that interact with the user and the operating system.</li><li>perform useful and important tasks without even writing programs, by calling Perl from the command line with brief "one-liners."</li><li>match and change text using the powerful technology of regular expressions.</li><li>enhance software quality with a larger repertoire of Perl operators, functions, and looping constructs.</li></ul>

   </div>
  
  <a name="h_01"></a><div class="heading">Introduction</div><div class="headingText">
    <p>
      Hello, my name is Peter Scott, and I have been using and teaching Perl
      for over a dozen years.  I'm the author of the books <i>Perl Debugged</i> and <i>Perl Medic</i>
      and the DVD/video <i>Perl Fundamentals</i>.  I've taught Perl in person to hundreds of people and I am
      also the author of the Perl 1 course from OST. I love Perl, and I want you to enjoy your time
      spent learning more about Perl from this course. Please let your instructor know of any way in
      which you think this course could be improved, and also parts that you found particularly
      effective (so we know not to mess with those bits).
    </p>
  </div>
  
 <a name="h_01"></a><div class="heading">Learning with O'Reilly School of Technology Courses</div><div class="headingText">  
  <p>As with every O'Reilly School of Technology course, we'll take a <i>user-active</i> 
    approach to learning. This means that you (the user) will be active! You'll learn by doing,  
    building live programs, testing them and experimenting with them—hands-on!</p>
  
  <p>To learn a new skill or technology, you have to experiment. The more you experiment, the more 
    you learn. Our system is designed to maximize experimentation and help you <i>learn to 
      learn</i> a new skill.</p>
  
  <p>We'll program as much as possible to be sure that the principles sink in and stay with you.</p>
  
  <p>Each time we discuss a new concept, you'll put it into code and see what YOU can do with it.  
   On occasion we'll even give you code that doesn't work, so you can see common mistakes and how 
   to recover from them. Making mistakes is actually another good way to learn.</p>  
    
  <p>Above all, we want to help you to <i>learn to learn</i>. We give you the tools to take control 
    of your own learning experience. </p>

  <p>When you complete an OST course, you know the subject matter, <i>and</i> you know how to 
    expand your knowledge, so you can handle changes like software and operating system updates.</p>
   
   <p>Here are some tips for using O'Reilly School of Technology courses effectively:</p>

  <ul><li><b>Type the code.</b> Resist the temptation to cut and paste the example code we give you. 
    Typing the code  
      actually gives you a feel for the programming task. Then play around with the examples to find out what 
      else you can make them do, and to check your understanding. It's highly
      unlikely you'll break anything by experimentation. If you <i>do</i> break something, that's an indication to us that 
      we need to improve our system!</li><li><b>Take your time.</b> Learning takes time. Rushing can have negative effects on your 
      progress. Slow down and let your brain absorb the new information thoroughly. 
      Taking your time helps to maintain a relaxed, positive approach. It also gives you the 
      chance to try new things and learn more than you otherwise would if you blew 
      through all of the coursework too quickly.</li><li><b>Experiment.</b> Wander from the path often and explore the possibilities. We can't 
      anticipate all of your questions and ideas, so it's up to you to experiment and create on 
      your own. Your instructor will help if you go completely off the rails.</li><li><b>Accept guidance, but don't depend on it.</b> Try to solve problems on your own. Going 
      from misunderstanding to understanding is the best way to acquire a new skill. Part of what 
      you're learning is problem solving. Of course, you can always contact your instructor 
      for hints when you need them.</li><li><b>Use all available resources!</b> In real-life problem-solving, you aren't bound by false 
      limitations; in OST courses, you are free to use any resources at your disposal to solve
      problems you encounter: the Internet, reference books, and online help are all fair game.   
      </li><li><b>Have fun!</b> Relax, keep practicing, and don't be afraid to make mistakes! 
      Your instructor will keep you at it until you've 
      mastered the skill. We want you to get that satisfied, "I'm so cool! I did it!"
      feeling. And you'll have some projects to show off when you're done.</li></ul>
  </div>   
 <a name="h_01"></a><div class="heading">Lesson Format</div><div class="headingText">
        
    <p>We'll try out lots of examples in each lesson. We'll have you write code, 
    look at code, and edit existing code. The code will be presented in boxes that will 
    indicate what needs to be done to the code inside.</p>
        
    <p>Whenever you see white boxes like the one below, you'll <i>type</i> the contents into the editor window to try the example yourself. 
      The CODE TO TYPE bar on top of the white box contains directions for you to follow:</p>
        
<div class="listingBox"><div class="listingTitle">CODE TO TYPE:</div><div class="listing"><pre>White boxes like this contain code for you to try out (type into a file to run).

If you have already written some of the code, new code for you to add <ins>looks like this</ins>. 
    
If we want you to remove existing code, the code to remove <del>will look like this</del>.
  
<span class="gray">We may also include instructive comments that you don't need to type.</span>  
</pre></div></div>
   
   <p>We may run programs and do some other activities in a terminal session in the operating system or other command-line environment. These will be shown 
     like this:</p>
   
<div class="interactiveBox"><div class="interactiveTitle">INTERACTIVE SESSION:</div><div class="interactive"><pre>
The plain black text that we present in these INTERACTIVE boxes is 
provided by the system (not for you to type). The commands we want you to type <ins>look like this</ins>.
</pre></div></div>   
        
  <p>Code and information presented in a gray OBSERVE box is for you to <i>inspect</i> and <i>absorb</i>. 
  This information is often color-coded, and followed by text explaining the code in detail:</p>
        
<div class="observeBox"><div class="observeTitle">OBSERVE:</div><div class="observe"><pre>
Gray "Observe" boxes like this contain <span class="darkred">information</span> (usually code specifics) for you to <i>observe</i>.
</pre></div></div>

   <p>The paragraph(s) that follow may provide addition details on <span class="darkred">information</span> that was 
     highlighted in the Observe box.</p>
   
   <p>We'll also set especially pertinent information apart in "Note" boxes:</p>      
   
   <p><div class="c"><table class="noteBox fBox pBox "><tr><td class="noteTitle">Note</td><td class="note">Notes provide information that is useful, but not absolutely necessary for performing the tasks at hand.</td></tr></table></div> </p>
   
   <p><div class="c"><table class="noteBox fBox pBox "><tr><td class="noteTitle">Tip</td><td class="note">Tips provide information that might help make the tools easier for you to use, such as shortcut keys.</td></tr></table></div></p>
   
   <p><div class="c"><table class="noteBox fBox pBox "><tr><td class="noteTitle">WARNING</td><td class="note">Warnings provide information that can help prevent program crashes and data loss.</td></tr></table></div></p>
        
 </div>   
 <a name="h_01"></a><div class="heading">The CodeRunner Screen</div><div class="headingText">
    
     <p>This course is presented in CodeRunner, OST's self-contained environment. We'll discuss the 
         details later, but here's a quick overview of the various areas of the screen:</p>
    
     <p><div class="c"><img src="../common/images/CodeRunnerScreen.png"></div></p>
     
     <p>These videos explain how to use CodeRunner:</p>
         
     <p><a href="http://www.youtube.com/watch?v=45sATp529Mw" target="_blank">File Management Demo</a></p>
     <p><a href="http://www.youtube.com/watch?v=SvbM6vPAG9k" target="_blank">Code Editor Demo</a></p>
     <p><a href="http://www.youtube.com/watch?v=WmajY8bIXrA" target="_blank">Coursework Demo</a></p>

 </div>
    
  <a name="h_02"></a><div class="heading">Prerequisites</div><div class="headingText">
   <p>We assume and require that you have either taken our 
     <a href="http://www.oreillyschool.com/courses/perl1/" target="_blank">Perl 1</a> course or have 
     acquired the knowledge imparted by that course some other way. We'll spend some time in this lesson 
     reviewing those prerequisites. (Of course, we can't review them completely; it took 16 lessons in 
     Perl&nbsp;1 to cover them. But we'll give it our best shot.)</p>
   
    <p>The next section is a detailed review of the topics covered in the Perl 1 course; we recommend going 
      through it as a refresher, but if you've taken Perl 1 recently or otherwise feel you don't need the 
      review, you can skip to the next section,  
      <a href="Perl2-01.html#postfixed_modifiers">Postfixed Modifiers</a>.</p>
    
    <p>If you find as you review those prerequisites and the rest of this lesson that you're not sure you're 
      ready for this course, don't worry—it happens. Don't give up, but
    don't try to struggle through the course if you're not sufficiently prepared.  We're 
    happy to transfer your registration to the Perl 1 course so you can get well-grounded in the
    fundamentals of Perl. Just contact us at 
     <a href="mailto:info@oreillyschool.com">info@oreillyschool.com</a>.</p>
  <a name="s_01"></a><div id="s_01"><div class="subheading">Review</div><div class="subheadingText">
   
    <p>Here's what you should know already in order to complete this course successfully. For each of 
      these topics, you need to know only the basics—we'll develop these topics in more depth 
      during this course. </p>
    <p>For instance, we require that you know how to declare a scalar variable 
      and manipulate scalars containing strings and numbers, but this does not extend to handling 
      pathologically long strings or understanding the internal structure of scalars:</p>
    
<div class="observeBox"><div class="observeTitle">OBSERVE: scalar initialization</div><div class="observe"><pre>
<span class="purple">my</span> <span class="red">$dog</span> = <span class="orange">"Spot"</span>;
</pre></div></div>
   
    <p>If you know what this code means, that's enough on the topic of initialization for this course.</p>
   
    <p><b>Development and Execution: </b>You understand how to create, edit, and run a Perl program.
     (We'll show you how the specialized training environment we use in this course works; but you should
     have developed and run Perl programs somewhere else at least once.) You know about the "shebang" 
     line and you follow it with <b>use strict;</b> and <b>use warnings;</b> and you do not finalize any program 
     that outputs errors or warnings. You know that command line arguments arrive in the array 
     <span class="red">@ARGV</span>.</p>
   
    <p><b>Documentation: </b>You know about the <i>perldoc</i> program and how to find the documentation for
     any given Perl built-in function: </p>
   
<div class="observeBox"><div class="observeTitle">OBSERVE:</div><div class="observe"><pre>
perldoc -f join
</pre></div></div>
         <p>
        <b>Output and errors: </b>You have used the functions <span class="darkgreen">print</span>,
    <span class="darkgreen">warn</span>, and <span class="darkgreen">die</span>; you can print to the standard
    output or error stream and you can make your program quit with an error message:
    </p>
<div class="observeBox"><div class="observeTitle">OBSERVE: output and basic error-handling</div><div class="observe"><pre>
print "I have ", $song_count, " MP3 files";
die "Error in consistency check";
</pre></div></div>

    <p>Let's start rolling these review points into a program now, so that you have something to do! </p>
    
    <p>First, we'll create a folder to keep all of our Perl stuff 
     organized. In the left panel of your CodeRunner window, right-click <b>Home</b>, and select 
     <b>New folder...</b> as shown:</p>
    
    <p><div class="c"><img src="images/coderunner/NewFolder.gif"></div></p>
    
    <p>Name the folder <b>perl2</b> as shown:</p>
    
    <p><div class="c"> <img src="images/coderunner/NewFolderPerl2.gif"></div></p>
   
    <p>Locate the drop-down menu in the CodeRunner toolbar. Be sure that <b>Perl</b> is the <b>Syntax</b> 
      selected from this menu:</p>
      
    <p><div class="c"> <img src="images/coderunner/perlmode.jpg"></div></p>
      
    <p>You should now see a <img src="images/coderunner/checksyntax.JPG"> icon on the left side of the 
      toolbar.</p> 
      
    <p>In the editor, type (don't just cut and paste!) all the lines you see below so it looks like this:</p> 

<div class="listingBox"><div class="listingTitle">CODE TO TYPE: review.pl</div><div class="listing"><pre><ins>#!/usr/bin/perl
use strict;
use warnings;

die "This... is a very short program.  I only have time to... arrgh!";
</ins>
</pre></div></div>
   
    <p>Compile the program: Click <img src="images/coderunner/checksyntax.JPG">. A new window will open where you can name 
      and save the file. Select the <b>/perl2</b> folder you just created (save all your files here unless otherwise specified), 
     enter the file name <b>review.pl</b>, and click <b>Save</b>:</p>
    
    <p><div class="c"><img src="images/coderunner/savefile.JPG"></div></p>
    
    <p>(If the <b>/perl2</b> folder doesn't yet exist, right-click on the <b>Home</b> folder and 
      create it by clicking <b>New Folder</b>.)</p>
      
    <p>Click the <b>Save</b> button.  You'll see a message confirming that the program compiled 
      and syntax is OK. Go ahead and <b>Close</b> this window.</p>
    
      <p>Now, let's run the program!  Click the <b>New Terminal</b> button in the Toolbar: <img src="images/coderunner/terminal.jpg">.</p>
        
        <p>Then, log in to the OST server.  Be sure to replace <span class="blue">username</span> with your username.
          It should look something like this:</p>
        
<div class="interactiveBox"><div class="interactiveTitle">INTERACTIVE TERMINAL SESSION</div><div class="interactive"><pre>
login: <span class="blue">username</span>
password:
Last login: Mon Aug 16 11:36:41 from 63.171.219.110
cold:~$ 
</pre></div></div>
        
        <p><table class="noteBox fBox pBox "><tr><td class="noteTitle">Note</td><td class="note">When you enter your password, the cursor will not move.  In fact, it will not appear
          as though anything is happening.  Rest assured, it is.  Just be sure to type your password
          carefully and hit Enter.  If you are having trouble, please contact your mentor.</td></tr></table></p>
        
        <p>The server is named <b>cold</b>.  All OST students have shells on this server.  A <b>shell</b>
          is the place where you execute Unix commands on the server.  The commands you execute on your
          shell will not effect any other shell.</p>
        
        <p><b>cold:~$</b> is called a command prompt.  If you see this, you're ready to execute 
          Unix commands.  To run your program, go to the Unix prompt and call it by name:</p>
        
<div class="interactiveBox"><div class="interactiveTitle">INTERACTIVE TERMINAL SESSION</div><div class="interactive"><pre>cold:~$ <ins>cd perl2</ins>
cold:~/perl2$ <ins>./review.pl</ins>
This... is a very short program.  I only have time to... arrgh!
</pre></div></div>
    
    <p><b>Interpolation: </b>You know about interpolating scalars and the more common
     escape sequences inside double-quoted strings:
    </p>
   <div class="observeBox"><div class="observeTitle">OBSERVE:</div><div class="observe"><pre>
print "I have $song_count MP3 files\n";
   </pre></div></div>
            <p>
        <b>Formatted printing: </b>You can print numbers and strings formatted to fit
    columns in tabular output using the <span class="darkgreen">printf</span> function:
    </p>
   <div class="observeBox"><div class="observeTitle">OBSERVE:</div><div class="observe"><pre>
printf "I have %3d MP3 files\n", 13;
   </pre></div></div>
            <p>
        <b>Variable declaration and initialization: </b>You use <span class="purple">my</span> to declare your variables,
    and are able to initialize them at the same time:
    </p>
   <div class="observeBox"><div class="observeTitle">OBSERVE:</div><div class="observe"><pre>
my $song_count;
my $car_type = 'hybrid';
   </pre></div></div>
   <p>
    Modify <span class="darkred">review.pl</span> as follows:
   </p>
<div class="listingBox"><div class="listingTitle">CODE TO EDIT:</div><div class="listing"><pre>
#!/usr/bin/perl
use strict;
use warnings;

<del>die "This... is a very short program.  I only have time to---arrgh";</del>
<ins>print "I have 3 MP3 files\nTheir lengths in minutes are:\n";
printf "#%2d: %-30s %5.2f\n", 1, "Fixing a Hole",     2.033333;
printf "#%2d: %-30s %5.2f\n", 2, "Lovely Rita",       2.07;
printf "#%2d: %-30s %5.2f\n", 3, "A Day in the Life", 5.55;</ins>
</pre></div></div>
            
    <p><img src="images/coderunner/checksyntax.JPG"> and run it.</p>
    
<div class="interactiveBox"><div class="interactiveTitle">INTERACTIVE TERMINAL SESSION</div><div class="interactive"><pre>cold:~/perl2$ <ins>./review.pl</ins>
I have 3 MP3 files
Their lengths in minutes are:
# 1: Fixing a Hole                   2.03
# 2: Lovely Rita                     2.07
# 3: A Day in the Life               5.55
cold:~/perl2$ 
</pre></div></div>
            
    <p>
        <b>Scalar variables: </b>You can use scalars to store numbers (integer and floating point) and strings:
    </p>
   <div class="observeBox"><div class="observeTitle">OBSERVE:</div><div class="observe"><pre>
$device_type = "cellphone";
$song_count = 42;
   </pre></div></div>
            <p>
        <b>Arithmetic: </b>You can perform basic arithmetic on numbers, and know that Perl has more complex arithmetic
    functions for everything from trigonometry to random numbers: 
    </p>
   <div class="observeBox"><div class="observeTitle">OBSERVE:</div><div class="observe"><pre>
$area = $PI * $radius ** 2;
$song_count++;
   </pre></div></div>
   <p>
    Modify <span class="darkred">review.pl</span> as shown:
   </p>
<div class="listingBox"><div class="listingTitle">CODE TO EDIT:</div><div class="listing"><pre>
#!/usr/bin/perl
use strict;
use warnings;

<del>print "I have 3 MP3 files\nTheir lengths in minutes are:\n";
printf "#%2d: %-30s %5.2f\n", 1, "Fixing a Hole",     2.033333;
printf "#%2d: %-30s %5.2f\n", 2, "Lovely Rita",       2.07;
printf "#%2d: %-30s %5.2f\n", 3, "A Day in the Life", 5.55;
</del><ins>my $song_count = 3;
my $song = 1;
print "I have $song_count MP3 files\nTheir lengths in minutes are:\n";
printf "#%2d: %-30s %5.2f\n", $song,     "Fixing a Hole",     2 +  2/60;
printf "#%2d: %-30s %5.2f\n", $song + 1, "Lovely Rita",       2 +  4/60;
printf "#%2d: %-30s %5.2f\n", $song + 2, "A Day in the Life", 5 + 33/60;</ins>
</pre></div></div>

      <p><img src="images/coderunner/checksyntax.JPG"> and run it.</p>
   
<div class="interactiveBox"><div class="interactiveTitle">INTERACTIVE TERMINAL SESSION</div><div class="interactive"><pre>cold:~/perl2$ <ins>./review.pl</ins>
I have 3 MP3 files
Their lengths in minutes are:
# 1: Fixing a Hole                   2.03
# 2: Lovely Rita                     2.07
# 3: A Day in the Life               5.55
cold:~/perl2$ 
</pre></div></div>
             
    <p><b>String manipulation: </b> You can truncate and lengthen strings, find their lengths, and test for substrings in them.
    Operators and functions used: <span class="blue">.</span> (concatenation), <span class="darkgreen">substr</span>, <span class="darkgreen">length</span>,
    and <span class="darkgreen">index</span>:
    </p>
   <div class="observeBox"><div class="observeTitle">OBSERVE:</div><div class="observe"><pre>
$device_type = $portability . 'phone';
$area_code = substr $phone_number, 1, 3;
   </pre></div></div>

      <p>
    <b>Lists: </b>You understand the role of lists in Perl code and how they can be constructed
    with the range operator:
   </p>
    <div class="observeBox"><div class="observeTitle">OBSERVE:</div><div class="observe"><pre>
my @small_ints = 1 .. 10;
   </pre></div></div>
            <p>
        <b>Array variables and array operations: </b>You are able to use arrays to store multiple scalars; 
              you can expand and contract them
    with the functions <span class="darkgreen">push, pop, shift,</span> and <span class="darkgreen">unshift</span>:
    </p>
    <div class="observeBox"><div class="observeTitle">OBSERVE:</div><div class="observe"><pre>
my @Beatles = qw(John Paul George Ringo);
push @Beatles, 'Pete';
$lead_singer = shift @Beatles; 
   </pre></div></div>
   <p>
    Modify <span class="darkred">review.pl</span> as shown:
   </p>
<div class="listingBox"><div class="listingTitle">CODE TO EDIT:</div><div class="listing"><pre>
#!/usr/bin/perl
use strict;
use warnings;

my $song_count = 3;
<del>my $song = 1;
printf "#%2d: %-30s %5.2f\n", $song,     "Fixing a Hole",     2 +  2/60;
printf "#%2d: %-30s %5.2f\n", $song + 1, "Lovely Rita",       2 +  4/60;
printf "#%2d: %-30s %5.2f\n", $song + 2, "A Day in the Life", 5 + 33/60;</del>
<ins>my $song = 0;
my @songs = ("Fixing a Hole", "Lovely Rita", "A Day in the Life");
my @song_lengths = (2 + 2/60, 2 + 4/60, 5 + 33/60);
print "I have $song_count MP3 files\nTheir lengths in minutes are:\n";
printf "#%2d: %-30s %5.2f\n", $song + 1, $songs[$song], $song_lengths[$song];
$song = $song + 1;
printf "#%2d: %-30s %5.2f\n", $song + 1, $songs[$song], $song_lengths[$song];
$song = $song + 1;
printf "#%2d: %-30s %5.2f\n", $song + 1, $songs[$song], $song_lengths[$song];</ins>
</pre></div></div>
            
      <p><img src="images/coderunner/checksyntax.JPG"> and run it.</p>
    
<div class="interactiveBox"><div class="interactiveTitle">INTERACTIVE TERMINAL SESSION</div><div class="interactive"><pre>cold:~/perl2$ <ins>./review.pl</ins>
I have 3 MP3 files
Their lengths in minutes are:
# 1: Fixing a Hole                   2.03
# 2: Lovely Rita                     2.07
# 3: A Day in the Life               5.55
cold:~/perl2$
</pre></div></div>
    
            <p>
        <b>Conditional statements: </b> You know how to use the <span class="purple">if</span> and <span class="purple">unless</span> statements. 
              You know about Perl's logical (boolean) operators and relational
    operators:
    </p>
    <div class="observeBox"><div class="observeTitle">OBSERVE:</div><div class="observe"><pre>
if ( $lead_singer eq 'John' ) 
{
  print "In My Life...\n";
}
unless ( $temperature &gt; 80 &amp;&amp; $humidity &lt; 0.25 )
{
  start_sprinklers();
}
   </pre></div></div>
   <p>
    Modify <span class="darkred">review.pl</span> as shown:
   </p>
<div class="listingBox"><div class="listingTitle">CODE TO EDIT:</div><div class="listing"><pre>
#!/usr/bin/perl
use strict;
use warnings;

<ins>my $CD_LENGTH = 80;</ins>
my $song_count = 3;
my $song = 0;
my @songs = ("Fixing a Hole", "Lovely Rita", "A Day in the Life");
my @song_lengths = (2 + 2/60, 2 + 4/60, 5 + 33/60);
print "I have $song_count MP3 files\nTheir lengths in minutes are:\n";
printf "#%2d: %-30s %5.2f\n", $song + 1, $songs[$song], $song_lengths[$song];
$song = $song + 1;
printf "#%2d: %-30s %5.2f\n", $song + 1, $songs[$song], $song_lengths[$song];
$song = $song + 1;
printf "#%2d: %-30s %5.2f\n", $song + 1, $songs[$song], $song_lengths[$song];
<ins>
if ( $song_lengths[0] + $song_lengths[1] + $song_lengths[2] &lt; $CD_LENGTH )
{
  print "I can fit all of these on a CD.\n";
}</ins>
</pre></div></div>
        
      <p><img src="images/coderunner/checksyntax.JPG"> and run it.</p>
    
<div class="interactiveBox"><div class="interactiveTitle">INTERACTIVE TERMINAL SESSION</div><div class="interactive"><pre>cold:~/perl2$ <ins>./review.pl</ins>
I have 3 MP3 files
Their lengths in minutes are:
# 1: Fixing a Hole                  2.03
# 2: Lovely Rita                    2.07
# 3: A Day in the Life              5.55
I can fit all of these on a CD.
cold:~/perl2$
</pre></div></div>
    
   <p>Because the combined length of the songs is not greater than 80 minutes (the space available on a standard 700M audio CD), you get 
     a message that the songs can fit.</p>

   <p><b>Looping statements: </b>You know how to use the <span class="purple">while</span>, <span class="purple">until</span>, 
               and <span class="purple">foreach</span> statements:</p>
    
    <div class="observeBox"><div class="observeTitle">OBSERVE:</div><div class="observe"><pre>
while ( my $arg = shift @ARGV )
{
  if ( $arg eq '--' )
  {
    last;    # Stop option processing
  }
  if ( index $arg, '-' == 0 )
  {
    push @options, substr $arg, 1;
  }
}
foreach my $option ( @options )
{
  unless ( is_valid( $option ) )
  {
    die "Invalid option $option\n";
  }
}
   </pre></div></div>
   <p>
    Modify <span class="darkred">review.pl</span> as shown:
   </p>
<div class="listingBox"><div class="listingTitle">CODE TO EDIT:</div><div class="listing"><pre>
#!/usr/bin/perl
use strict;
use warnings;

my $CD_LENGTH = 80;
my $song_count = 3;
<del>my $song = 0;</del>
<ins>my $index = 0;</ins>
my @songs = ("Fixing a Hole", "Lovely Rita", "A Day in the Life");
my @song_lengths = (2 + 2/60, 2 + 4/60, 5 + 33/60);
print "I have $song_count MP3 files\nTheir lengths in minutes are:\n";
<del>printf "#%2d: %-30s %5.2f\n", $song, $songs[$song], $song_lengths[$song];
$song = $song + 1;
printf "#%2d: %-30s %5.2f\n", $song, $songs[$song], $song_lengths[$song];
$song = $song + 1;
printf "#%2d: %-30s %5.2f\n", $song, $songs[$song], $song_lengths[$song];
</del><ins>foreach my $title ( @songs )
{
  printf "#%2d: %-30s %5.2f\n", $index + 1, $title, $song_lengths[$index];
  $index++;
}</ins>
if ( $song_lengths[0] + $song_lengths[1] + $song_lengths[2] &lt; $CD_LENGTH )
{
  print "I can fit all of these on a CD.\n";
}
</pre></div></div>

      <p><img src="images/coderunner/checksyntax.JPG"> and run it</p>
    
<div class="interactiveBox"><div class="interactiveTitle">INTERACTIVE TERMINAL SESSION</div><div class="interactive"><pre>cold:~/perl2$ <ins>./review.pl</ins>
I have 3 MP3 files
Their lengths in minutes are:
# 1: Fixing a Hole                  2.03
# 2: Lovely Rita                    2.07
# 3: A Day in the Life              5.55
I can fit all of these on a CD.
cold:~/perl2$
</pre></div></div>
    
    <p><b>Hash variables and operations: </b>You know how to use hashes to map strings to values. You understand the applications
    of hashes to problems that require lookup tables, mapping of discrete values, existence checks, concordance-type counting,
    and other set operations including union and intersection. (Those are some fairly technical terms for some common situations; 
    if you're not familiar with the terms,
    that's fine, as long as you've used hashes and understand that they're
    really important and useful in virtually every program.)<br><br>
    You know how to iterate through a hash with the <span class="darkgreen">keys</span>
    function:
    </p>
    <div class="observeBox"><div class="observeTitle">OBSERVE:</div><div class="observe"><pre>
my %state = ( AK =&gt; "Alaska", AL =&gt; "Alabama", CO =&gt; "Colorado" );
foreach my $abbreviation ( keys %state )
{
  print "$abbreviation is $state{$abbreviation}\n";
}
while ( my $word = shift @tokens )
{
  $seen{$word}++;
}
   </pre></div></div>
   <p>
    Modify <span class="darkred">review.pl</span> as shown:
   </p>
<div class="listingBox"><div class="listingTitle">CODE TO EDIT:</div><div class="listing"><pre>
#!/usr/bin/perl
use strict;
use warnings;

my $CD_LENGTH = 80;
my $song_count = 3;
my $index = <ins>1</ins>;
<del>my @songs = ("Fixing a Hole", "Lovely Rita", "A Day in the Life");
my @song_lengths = (2 + 2/60, 2 + 4/60, 5 + 33/60);
</del><ins>my %song_length = ("Fixing a Hole" =&gt; 2 + 2/60, "Lovely Rita" =&gt; 2 + 4/60, "A Day in the Life" =&gt; 5 + 33/60);
</ins>print "I have $song_count MP3 files\nTheir lengths in minutes are:\n";<ins>
my $total_length;</ins>
foreach my $title ( <ins>keys %song_length</ins> )
{
<del>  printf "#%2d: %-30s %5.2f\n", $index + 1, $title, $song_lengths[$index];
  $index++;</del>
<ins>  printf "#%2d: %-30s %5.2f\n", $index++, $title, $song_length{$title};
  $total_length += $song_length{$title};</ins>
}
if ( <ins>$total_length</ins> &lt; $CD_LENGTH )
{
  print "I can fit all of these on a CD.\n";
}
<ins>else
{
  print "I can't fit all of these on one CD!\n";
}</ins>     
</pre></div></div>
            
      <p><img src="images/coderunner/checksyntax.JPG"> and run it.</p>
    
<div class="interactiveBox"><div class="interactiveTitle">INTERACTIVE TERMINAL SESSION</div><div class="interactive"><pre>cold:~/perl2$ <ins>./review.pl</ins>
I have 3 MP3 files
Their lengths in minutes are:
# 1: A Day in the Life               5.55
# 2: Lovely Rita                     2.07
# 3: Fixing a Hole                   2.03
I can fit all of these on one CD.
cold:~/perl2$
</pre></div></div>

    <p><b>Subroutines: </b>You know how to declare and call subroutines, 
      how to pass arbitrary arguments and return lists of values:</p>
    
    <div class="observeBox"><div class="observeTitle">OBSERVE:</div><div class="observe"><pre>
my ($name, $score) = get_score( extract_words( $input ) );
sub get_score
{
  my @words = @_;
  my $person = $words[3];
  my $score = $words[5];
  return ($person, $score);
}
sub extract_words
{
  my $input = shift;  # "The score for &lt;person&gt; is &lt;score&gt;
  return split ' ', $input;
}
</pre></div></div>
   <p>
    Modify <span class="darkred">review.pl</span> as shown:
   </p>
<div class="listingBox"><div class="listingTitle">CODE TO EDIT:</div><div class="listing"><pre>
#!/usr/bin/perl
use strict;
use warnings;

my $CD_LENGTH = 80;
my $song_count = 3;
my $index = 1;

my %song_length = ("Fixing a Hole" =&gt; 2 + 2/60, "Lovely Rita" =&gt; 2 + 4/60, "A Day in the Life" =&gt; 5 + 33/60);
print "I have $song_count MP3 files\nTheir lengths in minutes are:\n";
<del>my $total_length;</del>
foreach my $title ( keys %song_length )
{
  printf "#%2d: %-30s %5.2f\n", $index++, $title, $song_length{$title};
  <del>$total_length += $song_length{$title};</del>
}
<del>if ( $total_length &lt; $CD_LENGTH )</del>
<ins>if ( total_length( %song_length ) &lt; $CD_LENGTH )</ins>
{
  print "I can fit all of these on a CD.\n";
}
else
{
  print "I can't fit all of these on one CD!\n";
}
       
<ins>sub total_length
{
  my %media = @_;

  my $total = 0;
  foreach my $length ( values %media )
  {
    $total += $length;
  }
  return $total;
}</ins>
</pre></div></div>
      
      <p><img src="images/coderunner/checksyntax.JPG"> and run it.</p>
    
<div class="interactiveBox"><div class="interactiveTitle">INTERACTIVE TERMINAL SESSION</div><div class="interactive"><pre>cold:~/perl2$ <ins>./review.pl</ins>
I have 3 MP3 files
Their lengths in minutes are:
# 1: A Day in the Life               5.55
# 2: Lovely Rita                     2.07
# 3: Fixing a Hole                   2.03
I can fit all of these on a CD.
cold:~/perl2$
</pre></div></div>

    <p><b>Context: </b>You understand the difference between scalar and list context (bonus points if you also know about boolean
    and void contexts!).  You know that context propagates through subroutine calls all the way down. And you know what an array
    evaluates to in scalar and list contexts:
   </p>
    <div class="observeBox"><div class="observeTitle">OBSERVE:</div><div class="observe"><pre>
print "There are " . @Beatles . " members of the band\n";
   </pre></div></div>
   <p>
    Modify <span class="darkred">review.pl</span> as shown:
   </p>
      
<div class="listingBox"><div class="listingTitle">CODE TO EDIT:</div><div class="listing"><pre>
#!/usr/bin/perl
use strict;
use warnings;

my $CD_LENGTH = 80 * 60;
<del>my $song_count = 3;</del>
my $index = 1;

my %song_length = ("Fixing a Hole" =&gt; 2 + 2/60, "Lovely Rita" =&gt; 2 + 4/60, "A Day in the Life" =&gt; 5 + 33/60);
<ins>my @songs = keys %song_length;</ins>
<del>print "I have $song_count MP3 files\nTheir lengths in minutes are:\n";</del>
<ins>print "I have " . @songs . " MP3 files\nTheir lengths in minutes are:\n";</ins>
foreach my $title ( keys %song_length )
{
  printf "#%2d: %-30s %5.2f\n", $index++, $title, $song_length{$title};
}
if ( total_length( %song_length ) &lt; $CD_LENGTH )
{
  print "I can fit all of these on a CD.\n";
}
else
{
  print "I can't fit all of these on one CD!\n";
}

sub total_length
{
  my %media = @_;

  my $total = 0;
  foreach my $length ( values %media )
  {
    $total += $length;
  }
  return $total;
} 
</pre></div></div>
   
      <p><img src="images/coderunner/checksyntax.JPG"> and run it.</p>
    
<div class="interactiveBox"><div class="interactiveTitle">INTERACTIVE TERMINAL SESSION</div><div class="interactive"><pre>cold:~/perl2$ <ins>./review.pl</ins>
I have 3 MP3 files
Their lengths in minutes are:
# 1: A Day in the Life               5.55
# 2: Lovely Rita                     2.07
# 3: Fixing a Hole                   2.03
I can fit all of these on a CD.
cold:~/perl2$
</pre></div></div>

    <p><b>Reading lines: </b>You know about the &lt;&gt; ("readline") operator for getting lines from 
      standard input, and how to use it in scalar and list contexts:</p>
   
    <div class="observeBox"><div class="observeTitle">OBSERVE:</div><div class="observe"><pre>
while ( defined( my $line = &lt;&gt; ) )
{
  chomp $line;
  if ( substr $line, 0 eq '&lt;' )
  {
    push @old_file_lines, $line;
  }
  elsif ( substr $line, 0 eq '&gt;' )
  {
    push @new_file_lines, $line;
  }  
}
</pre></div></div>
      
    <p><b>Sorting: </b>You can sort strings:</p>
   
    <div class="observeBox"><div class="observeTitle">OBSERVE:</div><div class="observe"><pre>
for my $abbreviation ( sort keys %state )
{
  # ...
}
</pre></div></div>
  
  </div></div>
  <a name="s_02"></a><div id="s_02"><div class="subheading">Wrapping Up the Review</div><div class="subheadingText">
   
    <p>Now let's look some of those features at work in an example program that acts as a 
      calculator, processing directives that act on a running accumulator. (This also just happens to be an 
      implementation of the project from the final assignment of the OST Perl 1 course.) Create <b>calculate.pl</b> 
      in the CodeRunner editor as shown:</p>
     
<div class="listingBox"><div class="listingTitle">CODE TO TYPE:</div><div class="listing"><pre><ins>#!/usr/bin/perl
use strict;
use warnings;

my $INVALID = "Invalid statement\n";
my $Accumulator;

while ( print( "&gt; " ) &amp;&amp; defined( my $line = &lt;&gt; ) )
{
  chomp $line;
  my $ok;
  ($ok, $Accumulator) = execute( $line, $Accumulator );
  if ( $ok )
  {
    print "OK\n";
  }
  else
  {
    warn $INVALID;
  }
}

sub execute
{
  my ($line, $current) = @_;

  if ( length $line == 0 )
  {
    return;
  }
  my $operator_length = index $line, ' ';
  if ( $operator_length &lt; 0 )
  {
    return monadic( $line, $current );
  }
  else
  {
    my $operator = substr $line, 0, $operator_length;
    my $operand = substr $line, $operator_length + 1;
    return dyadic ( $operator, $operand, $current );
  }
}

sub monadic
{
  my ($operator, $current) = @_;

  if ( $operator eq 'EQUALS' )
  {
    if ( defined $current )
    {
      print " = $current\n";
    }
    else
    {
      print " (undefined)\n";
    }
    return ( 1, $current );
  }
  elsif ( $operator eq 'CLEAR' )
  {
    return ( 1, 0 );
  }
    elsif ( $operator eq 'EXIT' )
  {
    exit;
  }
  return;
}

sub dyadic
{
  my ( $operator, $operand, $current) = @_;

  if ( $operator eq 'PLUS' )
  {
    return ( 1, $current + $operand );
  }
  elsif ( $operator eq 'MINUS' )
  {
    return ( 1, $current - $operand );
  }
  elsif ( $operator eq 'TIMES' )
  {
    return ( 1, $current * $operand );
  }
  elsif ( $operator eq 'OVER' )
  {
    return ( 1, $current / $operand );
  }
  return;
}</ins>
</pre></div></div>
   
    <p><img src="images/coderunner/checksyntax.JPG"> and run it. Enter information <ins>as shown</ins> 
     to make sure that it works:</p>
   
<div class="interactiveBox"><div class="interactiveTitle">INTERACTIVE TERMINAL SESSION</div><div class="interactive"><pre>cold:~/perl2$ <ins>./calculate.pl</ins>
&gt; <ins>EQUALS</ins>
 (undefined)
OK
&gt; <ins>CLEAR</ins>
OK
&gt; <ins>EQUALS</ins>
 = 0
OK
&gt; <ins>PLUS 42</ins>
OK
&gt; <ins>EQUALS</ins>
 = 42
OK
&gt; <ins>OVER 7</ins>
OK
&gt; <ins>EQUALS</ins>
 = 6
OK
&gt; <ins>TIMES 3</ins>
OK
&gt; <ins>EQUALS</ins>
 = 18
OK
&gt; <ins>MINUS 3</ins>
OK
&gt; <ins>EQUALS</ins>
 = 15
OK
&gt; <ins>explode</ins>
Invalid statement
&gt; <ins>EXIT</ins>
</pre></div></div>
   <p>
    This program demonstrates all of these topics:
       </p>
   <ul><li>Proper preamble</li><li>Scalar declaration and initialization</li><li>Interpolation of scalars and interpretation of escape sequences in double-quoted strings</li><li>Single-quoted strings</li><li>Arithmetic operators and the numeric equality operator</li><li>String testing with <span class="darkgreen">eq</span>, <span class="darkgreen">index()</span> and <span class="darkgreen">length()</span></li><li>String manipulation with <span class="darkgreen">substr()</span></li><li>Conditional statements and boolean operators</li><li>Input from standard input and removing any trailing newline</li><li>Defining, calling, and passing lists to and from subroutines</li><li>Printing to standard output and standard error</li></ul>
   <p>
    Can you locate and understand each element within the code?
   </p>
    <p>
    So now you've gotten a good sense of where we're starting from in this course.  If you don't understand the
    topics we've gone over, contact your instructor to figure out which is 
    the best route for you to take to become a Perl expert.
   </p>
  </div></div>
 </div>
  <a href="Perl2-01.html" name="postfixed_modifiers"></a><a name="h_03"></a><div class="heading">Postfixed Modifiers</div><div class="headingText">
   <p>
   Now on to something new!  We'll start with <b>postfixed statement modifiers.</b>
   They fit into the category of what computer linguists call <i>syntactic sugar</i>, meaning that there's always
    another way of doing what they provide, but they can give you a more visually pleasing and succinct
    syntax for that operation...in other words, something sweeter.
   </p>
   <p>
   
    In Perl, when only one statement is to be executed conditionally, you can not only leave off the curly braces,  
    you can omit the parentheses around the condition.  All you need to do is to put the <b>if</b> clause <i>after</i>
    the statement!
   </p>
   <p>
    Whoa.  That's a little weird if you've never encountered it before.  What does it look like?  Here's an example.
    Instead of writing:
   </p>
<div class="observeBox"><div class="observeTitle">OBSERVE: if statement</div><div class="observe"><pre>
<span class="purple">if</span> ( <span class="red">$car_type</span> eq <span class="orange">'hybrid'</span> )
{
  <span class="darkgreen">print</span> <span class="orange">"Check remaining battery life\n"</span>;
}
</pre></div></div>
   <p>
    You can write this:
   </p>
<div class="observeBox"><div class="observeTitle">OBSERVE: postfixed if modifier</div><div class="observe"><pre>
<span class="darkgreen">print</span> <span class="orange">"Check remaining battery life\n"</span> <span class="purple">if</span> <span class="red">$car_type</span> eq <span class="orange">'hybrid'</span>;
</pre></div></div>
   <p>
    You may be thinking to yourself, "But that's backwards! The computer can't run the <span class="darkgreen">print</span> 
     statement before it's
    tested the contents of <span class="red">$car_type</span>!"  <i>And you're right</i>; the computer doesn't do that.  Perl transforms 
     the postfixed <span class="purple">if</span>
    statement into the regular form of <span class="purple">if</span> statement (where the <span class="purple">if</span> comes first) before 
     it executes the statement.  This is
    why the postfixed form is called "syntactic sugar"... the lower levels of Perl aren't even aware that it exists. That's pretty sweet, huh?
   </p>
   <p>
    You might now be thinking, "Okay, but it still doesn't make sense!  Why write code in a form that pretends the computer 
    can do things backwards?
    It's like looking at the code upside-down."</p>
   
   <div class="c"><img src="http://upload.wikimedia.org/wikipedia/commons/0/07/Shirshasana.jpg" width="250"></div>
   <p>
    Well, we do it for the convenience of the people writing and reading the code. Convenience for the computer comes in a 
    distant second
    to that of humans—power to the people! In fact, sometimes we do speak, or at least think 
    like the postfixed <span class="purple">if</span> statement:
   </p>
   <ul><li>"Go to the grocery store and get me a bag of flour to make cookies, if they also have chocolate chips."</li><li>"Put the trash out tonight, if it's not raining."</li><li>"The Federal Reserve is expected to raise interest rates tomorrow, unless the quarterly employment report is bad."</li></ul>
   <p>
    Sometimes the real world doesn't provide a postfixed conditional where it should. Consider the instructions 
    on most shampoo
    bottles: "Lather, rinse, repeat."  Nowhere does it tell you when to <i>stop</i>...
   </p>
      <div class="c"><img src="images/lessonImages/shampoo.png"></div><br>
   <p>
    There is a postfixed <span class="purple">unless</span> modifier as well:
   </p>
     <div class="observeBox"><div class="observeTitle">OBSERVE: postfixed unless modifier</div><div class="observe"><pre>
<span class="darkgreen">die</span> <span class="orange">"Invalid location\n"</span> <span class="purple">unless</span> <span class="red">$state</span>{<span class="red">$abbreviation</span>};
   </pre></div></div>
   <p>
    If the full statement would exceed the maximum line length you've allotted, 
    then insert a line break and indent:
   </p>
    <div class="observeBox"><div class="observeTitle">OBSERVE: postfixed if modifier</div><div class="observe"><pre>
<span class="darkgreen">print</span> <span class="orange">"Check remaining battery life\n"</span>
  <span class="purple">if</span> <span class="red">$car_type</span> eq <span class="orange">'hybrid'</span> || <span class="red">$device_type</span> eq <span class="orange">'cellphone'</span>;
   </pre></div></div>
   <p>Let's try out some postfixed conditional modifiers on the <b>calculate.pl</b> program from our earlier 
     Perl 1 review. Edit <b>calculate.pl</b> as shown (if you skipped the Perl 1 review, create the program as shown below):</p>

<div class="listingBox"><div class="listingTitle">CODE TO EDIT:</div><div class="listing"><pre>#!/usr/bin/perl
use strict;
use warnings;

my $INVALID = "Invalid statement\n";
my $Accumulator;

while ( print( "&gt; " ) &amp;&amp; defined( my $line = &lt;&gt; ) )
{
  chomp $line;
  my $ok;
  ($ok, $Accumulator) = execute( $line, $Accumulator );
  if ( $ok )
  {
    print "OK\n";
  }
  else
  {
    warn $INVALID;
  }
}

sub execute
{
  my ($line, $current) = @_;

<del>  if ( length $line == 0 )
  {
    return;
  }</del>  
  <ins>return if length $line == 0;</ins>

  my $operator_length = index $line, ' ';
<del>  if ( $operator_length &lt; 0 )
  {
    return monadic( $line, $current );
  }
  else
  {</del>
  <ins>return monadic( $line, $current ) if $operator_length &lt; 0;</ins>

  my $operator = substr $line, 0, $operator_length;
  my $operand = substr $line, $operator_length + 1;
  return dyadic ( $operator, $operand, $current );
<del>  }</del>
}

sub monadic
{
  my ($operator, $current) = @_;

  if ( $operator eq 'EQUALS' )
  {
    if ( defined $current )
    {
      print " = $current\n";
    }
    else
    {
      print " (undefined)\n";
    }
    return ( 1, $current );
  }
  elsif ( $operator eq 'CLEAR' )
  {
    return ( 1, 0 );
  }
  elsif ( $operator eq 'EXIT' )
  {
    exit;
  }
return;
}

sub dyadic
{
  my ( $operator, $operand, $current) = @_;

<del>  if ( $operator eq 'PLUS' )
  {
    return ( 1, $current + $operand );
  }
  elsif ( $operator eq 'MINUS' )
  {
    return ( 1, $current - $operand );
  }
  elsif ( $operator eq 'TIMES' )
  {
    return ( 1, $current * $operand );
  }
  elsif ( $operator eq 'OVER' )
  {
    return ( 1, $current / $operand );
  }</del>
  <ins>return ( 1, $current + $operand ) if $operator eq 'PLUS';
  return ( 1, $current - $operand ) if $operator eq 'MINUS';
  return ( 1, $current * $operand ) if $operator eq 'TIMES';
  return ( 1, $current / $operand ) if $operator eq 'OVER';</ins>
  return;
}
</pre></div></div>
   
    <p><img src="images/coderunner/checksyntax.JPG"> and run it. Test it as shown:</p>
   
<div class="interactiveBox"><div class="interactiveTitle">INTERACTIVE TERMINAL SESSION</div><div class="interactive"><pre>cold:~/perl2$ <ins>./calculate.pl</ins>
&gt; <ins>EQUALS</ins>
 (undefined)
OK
&gt; <ins>CLEAR</ins>
OK
&gt; <ins>EQUALS</ins>
 = 0
OK
&gt; <ins>PLUS 42</ins>
OK
&gt; <ins>EQUALS</ins>
 = 42
OK
&gt; <ins>OVER 7</ins>
OK
&gt; <ins>EQUALS</ins>
 = 6
OK
&gt; <ins>TIMES 3</ins>
OK
&gt; <ins>EQUALS</ins>
 = 18
OK
&gt; <ins>MINUS 3</ins>
OK
&gt; <ins>EQUALS</ins>
 = 15
OK
&gt; <ins>explode</ins>
Invalid statement
&gt; <ins>EXIT</ins>
</pre></div></div>
   
   <p><table class="noteBox fBox pBox "><tr><td class="noteTitle">Note</td><td class="note">In general, you cannot replace an <span class="purple">if</span> block containing an <span class="purple">else</span> clause
    with a postfixed conditional; postfixed conditionals support only one outcome.  We are able to 
    replace many of the <span class="purple">else</span> and <span class="purple">elsif</span> clauses in the program with
    postfixed conditionals though, because the only statement currently present in their blocks is a <span class="purple">return</span>
    statement, which means that no additional code will be executed after the block anyway.
    It's up to you to decide whether you prefer this form to the previous one; remember, postfixed conditionals are optional
    and should only be used when they make the code clearer to you!  I decided against using one in one instance above,
    because it would have spoiled the symmetry of the surrounding
    code.</td></tr></table></p>
  </div>
  
  <a name="h_04"></a><div class="heading">Naked Blocks</div><div class="headingText">
   <p>
    Here's one more small new thing to introduce in this lesson: the (ahem) "naked block." 
    You've seen blocks preceded by
    an <span class="purple">if</span> statement, blocks preceded by a <span class="purple">foreach</span> statement,
    and blocks preceded by a <span class="purple">while</span> statement. But a naked block is not preceded
    by <i>any</i> statement:
   </p>
   
<div class="observeBox"><div class="observeTitle">OBSERVE: naked block example</div><div class="observe"><pre>
{
  <span class="purple">my</span> <span class="red">$label</span> = get_label( <span class="red">$report_file</span> );
  
  add_title( <span class="orange">"Report for $date for region $label"</span> );  
}
</pre></div></div>
<p>Functionally, there is <i>no difference</i> between that code and the same code without the braces...
    so what's the point? One answer lies in <i>scoping</i>. Remember that the scope (the parts of a program
    where you can legally refer to something) of a lexical variable (one declared with <span class="purple">my</span>)
    is from the word 'my' until the next closing brace (or end of file if that comes first). An important
    goal of code development is to <i>make the scope of each variable as small as possible</i>. That
    reduces the chance of accidentally using the wrong variable.  See what happens with this example: create <span class="darkred">naked.pl</span>:</p>

    <div class="listingBox"><div class="listingTitle">naked.pl</div><div class="listing"><pre><ins>
#!/usr/bin/perl
use strict;
use warnings;

my $label = get_label( "report_file" );
add_title( $label );
sub get_label {
 return "imaginary label"
}
sub add_title
{
 print "Adding title of $_[0]\n";
}

# Pretend this is much later in the program...

$label = 'Nothing to do with the previous $label';
</ins></pre></div></div>
<p>
    See how that program compiles and runs okay?  Now change it:
</p> <div class="listingBox"><div class="listingTitle">naked.pl</div><div class="listing"><pre>#!/usr/bin/perl
use strict;
use warnings;

<ins>{</ins>
 my $label = get_label( "report_file" );
 add_title( $label );
<ins>}</ins>
sub get_label {
 return "imaginary label"
}
sub add_title
{
 print "Adding title of $_[0]\n";
}

# Pretend this is much later in the program...

$label = 'Nothing to do with the previous $label';
</pre></div></div>
<p>
    Save and run that program, or try to.  See how it won't compile?
</p>
<p>So a naked block lets you restrict the scope of a variable even when there's no <span class="purple">if</span>,
<span class="purple">while</span>, or <span class="purple">foreach</span> involved. In the example above, the variable
<span class="red">$label</span> is needed only long enough to pass it to the routine <span class="blue">add_title</span>, so we
    placed it in a block that was only that long. The world is full of Perl programs that start out with
    immense lists of declarations of variables that only get used on a few lines much later in the code.
    These programs are hard to read and hard to maintain. Use scoping to make your programs better!</p>   
    
    <p>
    There's one more thing you can do with a naked block, although it's not very common in
    well-designed programs.  Remember the loop control statements <span class="purple">next</span> and <span class="purple">last</span>?  
    Well, they work inside a naked block as well.
    One way to remember them is that <span class="purple">last</span> jumps to right <i>after</i> the closing curly brackets, 
     whereas <span class="purple">next</span> jumps
    to right <i>before</i> the closing curly brace:
</p>
   <div class="c"><img src="images/lessonImages/loop_control.png"></div>
   <p>
    In the case of a naked block, both <span class="purple">last</span> and <span class="purple">next</span> will have exactly the 
     same effect, because the block is not
    a looping construct that will repeat.  But there is a block control statement 
    that <i>can</i> be useful in this case: <span class="purple">redo</span>.
    <span class="purple">redo</span> jumps back to right after the <i>opening</i> curly brace. Take a look:
   </p>
   <div class="c"><img src="images/lessonImages/loop_control_2.png"></div>
   <p>
    It literally re-does the block.  If you're in a looping block, it will cause the current iteration of the loop
    to be performed again (without testing the condition in a <span class="purple">while</span> statement or taking the next list element in a 
    <span class="purple">foreach</span> statement).  In a naked block, <span class="purple">redo</span> will cause the block to be executed again.
    This doesn't provide any behavior you can't get with a <span class="purple">while</span> statement, but—remembering Perl's motto, 
     "There's More Than
    One Way To Do It"—it can sometimes provide a more natural or intuitive way of solving a problem.  
    Check out this example:
   </p>
    
<div class="observeBox"><div class="observeTitle">OBSERVE: redo in naked block</div><div class="observe"><pre>
{
  <span class="darkgreen">print</span> <span class="orange">"Enter password: "</span>;
  <span class="red">$password</span> = <span class="blue">read_password_from_terminal</span>();
  <span class="purple">redo unless</span> <span class="darkgreen">length</span> <span class="red">$password</span>;
}
</pre></div></div> 
   <p>
    You <i>could</i> write that using a <span class="purple">while</span> or <span class="purple">until</span> loop,
    in fact, go ahead and try that right now.  It's not necessarily worse than using <span class="purple">redo</span> like
    we did in the above example; just see which version you prefer.  Perl is all about having choices!
   </p> 
  
  <p>Phew! That was a lot of information packed into one lesson, but we needed a healthy jump-start to get going. 
    We have much to cover! See you in the next lesson!
  </p>
  </div>
  <br><br><br><br>
  <p>Once you finish with the lesson, go back to the syllabus page by clicking on the page tab above and do
   the assignments.</p>

<div class="footer"><div id="timeSurvey"></div>				
				Copyright © 1998-2014 O'Reilly Media, Inc.<br><img src="https://courses.oreillyschool.com/common/cclicense.png"><br>
				This work is licensed under a Creative Commons Attribution-ShareAlike 3.0 Unported License.<br>
				See <a href="http://creativecommons.org/licenses/by-sa/3.0/legalcode">http://creativecommons.org/licenses/by-sa/3.0/legalcode</a> 
				for more information.
				</div><iframe id="t" width="1" height="1" border="0" style="display:none"></iframe><script language="javascript">bodyLoaded();</script><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-44720547-1', 'oreillyschool.com');
  ga('send', 'pageview');
</script></body></html>